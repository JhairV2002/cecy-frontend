<p-toast position="top-center"></p-toast>

<div class="p-fluid">
  <form [formGroup]="formSchoolPeriod" (ngSubmit)="onSubmit()">
    <!--state & name-->
    <div class="formgrid grid">
      <!--name-->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12">
        <label for="name" appLabel label="Nombre del Periodo Escolar:"
               [required]="isRequired(nameField)"
               [valid]="nameField.valid"
               [touched]="nameField.touched"
               [dirty]="nameField.dirty">
        </label>
        <input pInputText id="name" formControlName="name" class="uppercase">
        <small appErrorMessage
               [errors]="nameField.errors"
               [touched]="nameField.touched"
               [dirty]="nameField.dirty">
        </small>
      </div>

      <!--state-->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12">
        <label for="state" appLabel label="Estado:"
               [required]="isRequired(stateField)"
               [valid]="stateField.valid"
               [touched]="stateField.touched"
               [dirty]="stateField.dirty">
        </label>
        <p-dropdown id="state"
                    formControlName="state"
                    dataKey="id"
                    [options]="states"
                    [filter]="true"
                    filterBy="name"
                    placeholder="Seleccione">
          <ng-template pTemplate="selectedItem">
            <div *ngIf="stateField.value">
              <div>{{stateField.value?.name}}</div>
            </div>
          </ng-template>
          <ng-template let-item pTemplate="item">
            <div>
              <div>{{item.name}}</div>
            </div>
          </ng-template>
        </p-dropdown>
        <small appErrorMessage
               [errors]="stateField.errors"
               [touched]="stateField.touched"
               [dirty]="stateField.dirty">
        </small>
      </div>

    </div>

    <!--code & minimumNote-->
    <div class="formgrid grid">
      <!--code-->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12">
        <label for="code" appLabel label="Codigo:"
               [required]="isRequired(codeField)"
               [valid]="codeField.valid"
               [touched]="codeField.touched"
               [dirty]="codeField.dirty">
        </label>
        <input pInputText id="code" formControlName="code" class="uppercase">
        <small appErrorMessage
               [errors]="codeField.errors"
               [touched]="codeField.touched"
               [dirty]="codeField.dirty">
        </small>
      </div>
      <!--minimumNote-->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12">
        <label for="minimumNote" appLabel label="Nota minima:"
               [required]="isRequired(minimumNoteField)"
               [valid]="minimumNoteField.valid"
               [touched]="minimumNoteField.touched"
               [dirty]="minimumNoteField.dirty">
        </label>
        <input pInputText id="minimumNote" formControlName="minimumNote" class="uppercase">
        <small appErrorMessage
               [errors]="minimumNoteField.errors"
               [touched]="minimumNoteField.touched"
               [dirty]="minimumNoteField.dirty">
        </small>
      </div>
    </div>
    <!-- startedAt & endedAt -->

    <div class="formgrid grid">
      <!-- startedAt -->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12" >
        <label for="startedAt" appLabel label="Fecha de inicio:"
               [required]="isRequired(startedAtField)"
               [valid]="startedAtField.valid"
               [touched]="startedAtField.touched"
               [dirty]="startedAtField.dirty">
        </label>
        <p-calendar class="bg-blue-100 w-12rem" id="startedAt" formControlName="startedAt" dateFormat="yy-mm-dd"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    [readonlyInput]="true"></p-calendar>
        <small appErrorMessage
               [errors]="startedAtField.errors"
               [touched]="startedAtField.touched"
               [dirty]="startedAtField.dirty">
        </small>
      </div>
      <!-- endedAt -->
      <div class="field xl:col-6 lg:col-6 md:col-12 sm:col-12">
        <label for="endedAt" appLabel label="Fecha de fin:"
               [required]="isRequired(endedAtField)"
               [valid]="endedAtField.valid"
               [touched]="endedAtField.touched"
               [dirty]="endedAtField.dirty">
        </label>
        <p-calendar id="endedAt" formControlName="endedAt" dateFormat="yy-mm-dd"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    [readonlyInput]="true"></p-calendar>
        <small appErrorMessage
               [errors]="endedAtField.errors"
               [touched]="endedAtField.touched"
               [dirty]="endedAtField.dirty">
        </small>
      </div>
    </div>


    <!--onSubmit()-->
    <div class="field">
      <button pButton pRipple label="Guardar" class="p-button-rounded"
              icon="pi pi-save"></button>
    </div>

    <!--progressBar-->
    <div class="field" *ngIf="progressBar">
      <p-progressBar mode="indeterminate"></p-progressBar>
    </div>
  </form>
</div>

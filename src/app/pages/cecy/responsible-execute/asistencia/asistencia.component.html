<p-toast></p-toast>
<p-toolbar>
  <div class="p-toolbar-group-start gap-2">
    <button
      pButton
      type="button"
      id="volver"
      class="p-button p-button-outlined"
      icon="pi pi-arrow-left"
      (click)="redireccionar()"
      label="Regresar"
    ></button>
  </div>
</p-toolbar>
<p-card>
  <div class="flex items-center justify-center">
    <h1 class="text-2xl">Agregar nueva fecha</h1>
  </div>
  <div class="p-fluid">
    <form [formGroup]="formAttendance" (ngSubmit)="onSubmit()">
      <div class="flex flex-wrap">
        <div class="w-full sm:w-1/2">
          <label
            for="name"
            appLabel
            label="Fecha actual:"
            [required]="isRequired(dateField)"
            [valid]="dateField.valid"
            [touched]="dateField.touched"
            [dirty]="dateField.dirty"
          >
          </label>
          <p-calendar
            [showIcon]="true"
            [showButtonBar]="true"
            placeholder="Seleccione la fecha"
            formControlName="fecha"
          ></p-calendar>
          <small
            appErrorMessage
            [errors]="dateField.errors"
            [touched]="dateField.touched"
            [dirty]="dateField.dirty"
          >
          </small>
        </div>
      </div>
      <div>
        <label
          for="name"
          appLabel
          label="Observaciones:"
          [required]="isRequired(observationField)"
          [valid]="observationField.valid"
          [touched]="observationField.touched"
          [dirty]="observationField.dirty"
        >
        </label>
        <textarea
          rows="5"
          cols="30"
          pInputTextarea
          formControlName="observaciones"
        ></textarea>
        <small
          appErrorMessage
          [errors]="observationField.errors"
          [touched]="observationField.touched"
          [dirty]="observationField.dirty"
        >
        </small>
      </div>

      <div *ngIf="isCreating">
        <label for="name" appLabel label="Evidencia fotografica:"> </label>
        <p-fileUpload
          chooseLabel="Seleccione la imagen"
          uploadLabel="Subir"
          cancelLabel="Cancelar"
          accept="image/*"
          (onSelect)="onFileUpload($event)"
        ></p-fileUpload>
      </div>
      <div *ngIf="!isCreating">
        <label for="name" appLabel label="Evidencia fotográfica:">
          <span
            class="ml-2 text-gray-500 cursor-pointer"
            >
            <!-- (click)="editarImagen()" -->
            <i class="fas fa-pencil-alt"></i>
          </span>
        </label>
        <div class="flex justify-center items-center max-w-md mx-auto">
          <img
            [src]="img"
            alt="Evidencia Fotográfica"
            class="max-w-full h-auto rounded border border-gray-300"
          />
        </div>
      </div>

      <p-divider></p-divider>
      <div class="flex flex-col items-center">
        <div>
          <button
            pButton
            type="submit"
            pRipple
            label="Guardar"
            icon="pi pi-save"
          ></button>
        </div>
      </div>
    </form>
  </div>
</p-card>

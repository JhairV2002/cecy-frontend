<div class="p-grid p-dir-col">
  <div class="p-col">
    <h2 class="p-text-center">Listado de Estudiantes</h2>
  </div>

  <div class="p-col p-d-flex p-justify-between p-mb-3">
    <div class="p-d-flex">
      <button pButton type="button" class="p-button p-button-outlined" icon="pi pi-arrow-left" (click)="regresar()">
        Volver
      </button>
      <button pButton type="button" class="p-button p-button-primary p-ml-2" icon="pi pi-user-plus" (click)="redireccionar()">
        Asistencia
      </button>
    </div>
    <div class="p-col-auto p-ml-auto">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon">
          <i class="pi pi-search"></i>
        </span>
        <input pInputText type="text" placeholder="Buscar por nombre" [(ngModel)]="nombreFiltrado" (input)="filtrarPorNombre()" />
      </div>
    </div>
  </div>

  <div class="p-col">
    <p-table [value]="estudiantes$ | async | nombreFilter: nombreFiltrado" [responsive]="true" class="p-datatable">
      <ng-template pTemplate="header">
        <tr>
          <th>NOMBRE</th>
          <th>NOTA 1</th>
          <th>NOTA 2</th>
          <th>PROMEDIO</th>
          <th>ESTADO</th>
          <th>ACCIONES</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-matricula>
        <tr>
          <td>{{ matricula.estudiantes ? matricula.estudiantes.nombres : "Sin Estudiante" }}</td>
          <td>
            <p-inputNumber id="nota1" [(ngModel)]="matricula.nota1" placeholder="Ingrese una nota" [min]="1" [max]="100"
              [showButtons]="true" [buttonLayout]="'horizontal'" (keydown)="validarNumero($event)"></p-inputNumber>
          </td>
          <td>
            <p-inputNumber id="nota2" [(ngModel)]="matricula.nota2" placeholder="Ingrese una nota" [min]="1" [max]="100"
              [showButtons]="true" [buttonLayout]="'horizontal'" (keydown)="validarNumero($event)"></p-inputNumber>
          </td>
          <td>{{ matricula.promedio }}</td>
          <td>{{ matricula.estadoCurso.descripcion }}</td>
          <td>
            <button pButton type="button" class="p-button p-button-rounded p-button-success" (click)="guardarNotas(matricula)">
              Guardar
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="p-col p-text-center">
    <button pButton type="button" class="p-button p-button-success" id="excel" (click)="generarExcel()">Generar Excel</button>
  </div>
</div>

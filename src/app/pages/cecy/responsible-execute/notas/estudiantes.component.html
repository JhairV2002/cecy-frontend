<div class="p-grid p-dir-col">
  <div class="p-col p-d-flex p-justify-between p-mb-3">
    <div class="p-d-flex" id="nav">
      <button pButton type="button" id="volver" class="p-button p-button-outlined" icon="pi pi-arrow-left"
        (click)="regresar()">
        Volver
      </button>
      <button pButton type="button" id="asistencia" class="p-button p-button-primary p-ml-2" icon="pi pi-user-plus"
        (click)="redireccionar()">
        Asistencia
      </button>
    </div>
    <div class="text-left p-5" id="title">
      <h1 class="text-3xl font-semi-bold">Listado de Estudiantes</h1>
    </div>
    <div class="p-col-auto p-ml-auto">
      <div id="search" class="p-inputgroup">
        <span id="buscar1" class="p-inputgroup-addon">
          <i class="pi pi-search"></i>
        </span>
        <input pInputText id="buscar" type="text" placeholder="Buscar por nombre" [(ngModel)]="nombreFiltrado"
          (input)="filtrarPorNombre()" />
      </div>
    </div>
  </div>

  <div class="p-col" id="table">
    <p-table [value]="estudiantes$ | async | nombreFilter: nombreFiltrado" [responsive]="true" class="p-datatable">
      <ng-template pTemplate="header">
        <tr>
          <th>NOMBRE</th>
          <th>NOTA 1</th>
          <th>NOTA 2</th>
          <th>% ASISTENCIA</th>
          <th>PROMEDIO</th>
          <th>ESTADO</th>
          <th>ACCIONES</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-matricula>
        <tr>
          <td>{{ matricula.estudiantes ? matricula.estudiantes.nombres : "Sin Estudiante" }}</td>
          
          <td>
            <p-inputNumber id="nota1" [(ngModel)]="matricula.nota1" placeholder="Ingrese una nota" [min]="1" [max]="100"
              [showButtons]="true" [buttonLayout]="'horizontal'" (keydown)="validarNumero($event)"></p-inputNumber>
          </td>
          <td>
            <p-inputNumber id="nota2" [(ngModel)]="matricula.nota2" placeholder="Ingrese una nota" [min]="1" [max]="100"
              [showButtons]="true" [buttonLayout]="'horizontal'" (keydown)="validarNumero($event)"></p-inputNumber>
          </td>
          <td>
            <p-inputNumber id="asistencia" [(ngModel)]="matricula.asistencia" placeholder="Ingrese el % asistencia"
              [min]="1" [max]="100" [showButtons]="true" [buttonLayout]="'horizontal'"
              (keydown)="validarNumero($event)"></p-inputNumber>
          </td>
          <td>{{ matricula.promedio }}</td>
          <td>{{ matricula.estadoCurso.descripcion }}</td>
          <td>
            <button pButton type="button" class="p-button p-button-rounded p-button-success"
              (click)="guardarNotas(matricula)">
              Guardar
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="p-col p-text-center">
    <button pButton type="button" class="p-button p-button-success" icon="pi pi-download" id="excel"
      (click)="generarExcel()">ã…¤Generar Excel</button>
  </div>
</div>

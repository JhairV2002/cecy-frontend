<p-dialog  [(visible)]="openParticipantCourse" [modal]="true">
    <app-view-grades-participant  [participantCourse] ="selectedParticipantCourse" *ngIf="openParticipantCourse" (openParticipantCourse)="openParticipantCourse=$event">
    </app-view-grades-participant>
</p-dialog>
<div class="container">
    <p-paginator [rows]="paginator.per_page!" [totalRecords]="paginator.total!" (onPageChange)="paginate($event)">
    </p-paginator>
    <div class="courses-container grid">
        <div *ngFor="let registration of registrations" class="field xl:col-3 lg:col-3 md:col-6 sm:col-6">
            <p-card class="custom-card" [style]="{width: '225px'}" styleClass="p-card-shadow">

                <ng-template pTemplate="header">
                    <img class="image" alt="Card"
                        src="https://victorroblesweb.es/wp-content/uploads/2018/11/angular-bg.png">
                </ng-template>
                <ng-template pTemplate="body">
                    <p style="text-align: center;">
                        <button (click)= "downloadMyFile()" *ngIf="registration.stateCourse.name == 'APROBADO'" pButton type="button"  icon="pi pi-download"  label="Descargar Certificado" class="p-button-link"
                         ></button>
                    </p>
                    
                    <p-splitButton label="Asistencia" styleClass="p-button-raised p-button-success mr-2 mb-2" icon="pi pi-users" (onClick)="loadAttendances(registration.detailPlanification!.id!)"
                    (onDropdownClick)="select(registration)" [model]="items"
                    ></p-splitButton>
                    <!--<p style="text-align: center;">
                        <button pButton type="button" (click)="loadAttendances(registration.detailPlanification!.id!)"
                         label="Asistencia" class=" p-button-success" icon="pi pi-users"></button>
                    </p>  -->
                    <p style="text-align: center;">
                        <p-button (click)="redirectTopics(registration.detailPlanification.planification?.course?.id)"
                        icon="pi pi-folder" class=" p-button-secondary custom-button" label="Temario" ></p-button>
                    </p>
                       
                    <!--<p style="text-align: center;">

                        <button (click)="loadRegistrationGrade(registration)" pButton type="button" label="Notas"
                         class="p-button-warning" icon="pi pi-book"></button>-->
                        
                            <!--<p-button (onClick)="loadRegistrationGrade(registration.id!)" icon="pi pi-external-link" label="Notas"></p-button>
                                <p-dialog header="Notas"  [style]="{width: '50vw'}" [baseZIndex]="10000"></p-dialog>
                    </p>-->
                 
                </ng-template>
                <p style="text-align: center;">
                    Nombre del curso: {{registration.detailPlanification?.planification?.course?.name!}}
                </p>
                <p style="text-align: center;">
                    Estado: {{registration.stateCourse?.name}}
                </p>
            </p-card>
        </div>
    </div>
</div>

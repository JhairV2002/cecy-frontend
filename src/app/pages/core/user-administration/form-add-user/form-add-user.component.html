<p-dialog
  header="{{ titleModal }} usuario"
  [(visible)]="showModal"
  [maximizable]="true"
  [style]="{ width: '490px' }"
  [modal]="true"
  (onHide)="closeModal()"
>
  <div class="container">
    <div class="p-fluid">
      <form [formGroup]="formUser" (ngSubmit)="onSubmit()">
        <div class="formgrid grid justify-content-center">
          <div class="field col-12">
            <label
              for="name"
              appLabel
              label="Nombres:"
              [required]="isRequired(nameField)"
              [valid]="nameField.valid"
              [touched]="nameField.touched"
              [dirty]="nameField.dirty"
            >
            </label>
            <input
              pInputText
              id="name"
              formControlName="names"
              class="uppercase"
            />
            <small
              appErrorMessage
              [errors]="nameField.errors"
              [touched]="nameField.touched"
              [dirty]="nameField.dirty"
            >
            </small>
          </div>
          <!--lastname-->
          <div class="field col-12">
            <label
              for="lastname"
              appLabel
              label="Apellidos:"
              [required]="isRequired(lastnameField)"
              [valid]="lastnameField.valid"
              [touched]="lastnameField.touched"
              [dirty]="lastnameField.dirty"
            >
            </label>
            <input
              pInputText
              id="lastnames"
              formControlName="lastnames"
              class="uppercase"
            />
            <small
              appErrorMessage
              [errors]="lastnameField.errors"
              [touched]="lastnameField.touched"
              [dirty]="lastnameField.dirty"
            >
            </small>
          </div>
          <!-- Phone -->
          <div class="field col-12">
            <label
              for="phone"
              appLabel
              label="Teléfono:"
              [required]="isRequired(phoneField)"
            >
            </label>
            <input
              pInputText
              formControlName="phone"
              pKeyFilter="pint"
              placeholder="Ej. 0987654321"
            />
            <small
              appErrorMessage
              [errors]="phoneField.errors"
              [touched]="phoneField.touched"
              [dirty]="phoneField.dirty"
            ></small>
          </div>
          <div class="field col-12">
            <label
              for="role"
              appLabel
              label="Rol:"
              [required]="isRequired(roleField)"
            ></label>
            <p-dropdown
              placeholder="Seleccione un rol"
              [options]="roles"
              optionLabel="name"
              optionValue="id"
              [showClear]="true"
              [style]="{ width: '100%' }"
              formControlName="roleId"
            ></p-dropdown>
          </div>
          <div class="field col-12">
            <label
              for="email"
              appLabel
              label="Correo electrónico institucional:"
              [required]="isRequired(emailField)"
              [valid]="emailField.valid"
              [touched]="emailField.touched"
              [dirty]="emailField.dirty"
            >
            </label>
            <input
              pInputText
              id="email"
              formControlName="email"
              class="lowercase"
            />
            <!-- <small appErrorMessage>
              [errors]="emailField.errors" [touched]="emailField.touched"
              [dirty]="emailField.dirty"
            </small> -->
          </div>
          <div class="field col-12" *ngIf="!isEdit">
            <label
              for="password"
              appLabel
              label="Contraseña:"
              [required]="isRequired(passwordField)"
            ></label>

            <p-password
              id="password"
              formControlName="password"
              mediumLabel="Nivel medio"
              promptLabel="Escriba su contraseña"
              strongLabel="Fuerte"
              [toggleMask]="true"
              weakLabel="Débil"
            >
            </p-password>
            <!-- <small appErrorMessage>
              [errors]="passwordField.errors" [touched]="passwordField.touched"
              [dirty]="passwordField.dirty"
            </small> -->
          </div>
        </div>

        <p-divider></p-divider>

        <!--onSubmit()-->
        <div class="field">
          <button
            [disabled]="formUser.invalid"
            pButton
            type="submit"
            pRipple
            label="{{ titleButton }}"
            class="p-button-rounded"
            icon="pi pi-save"
          ></button>
        </div>

        <!--progressBar-->
        <div class="mt-4" *ngIf="progressBar">
          <p-progressBar mode="indeterminate"></p-progressBar>
        </div>
      </form>
    </div>
  </div>
</p-dialog>

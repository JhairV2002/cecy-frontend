<p-dialog header="{{selectedPlanificationCourse.course?.name}}" [(visible)]="openPlanificationCourse"
          [maximizable]="true" [modal]="true">
  <!-- <app-course-detail [planificationCourse]="selectedPlanificationCourse" *ngIf="openPlanificationCourse"
                     (openPlanificationCourse)="openPlanificationCourse=$event"></app-course-detail>
</p-dialog> -->
<div class="container">
  <p-toolbar class="filter-options">
    <div class="p-toolbar-group-left">
      <div class="field col p-input-icon-right">
        <div class="p-inputgroup">
          <input id="search" [formControl]="search" (keypress)="filter($event)" type="text" pInputText
                 class="inputfield w-full" placeholder="Buscar">
          <button pButton pRipple type="button" icon="pi pi-search" (click)="filter($event)"></button>
        </div>
      </div>
    </div>
    <div class="p-toolbar-group-right">
      <p-dropdown (onClear)="loadPlanificationsCoursesByParticipantType()" [showClear]="true"
                  (onChange)="loadPlanificationCoursesByParticipantTypeAndCategory()"
                  placeholder="Seleccione una categoría" [options]="catalogues" [(ngModel)]="selectedCategory"
                  optionLabel="name"></p-dropdown>
    </div>
  </p-toolbar>
  <p-paginator [rows]="paginator.per_page!"
               [totalRecords]="paginator.total!"
               (onPageChange)="paginate($event)">
  </p-paginator>
  <div *ngIf="loaded">
    <p style="text-align: center;">
      <i class="pi pi-spin pi-spinner blur" style="font-size: 15rem"></i>
    </p>
  </div>
  <div *ngIf="!loaded" class="courses-container grid">
    <div *ngFor="let planification of planifications;  let i = index" class="field xl:col-3 lg:col-3 md:col-6 sm:col-6">
      <p-card class="custom-card" subheader="{{planification.course?.code}}" header="{{planification.course?.name}}"
              [style]="{width: '250px'}" styleClass="p-card-shadow">
        <ng-template pTemplate="header">
          <img class="image" alt="Card" [src]=images[i]>
          <div class="free p-input-icon-left" *ngIf="planification.course?.free">
            <i style="color:azure;" class="pi pi-check custom-icon"></i>
            <p style="padding-left: 30px;" class="free-text">Gratuito</p>
          </div>
          <div class="free p-input-icon-left" *ngIf="!planification.course?.free">
            <i style="color:azure;" class="pi pi-money-bill custom-icon"></i>
            <p style="padding-left: 30px;" class="no-free-text">Pagado</p>
          </div>
        </ng-template>
        <p style="text-align: center;">
          Empieza: {{planification.startedAt | date: 'dd/MM/yyyy' }}
        </p>
        <ng-template pTemplate="footer">
          <p style="text-align: center;">
            <p-button (onClick)="loadPlanificationCourseDetails(planification)" class="p-button-secondary custom-button"
                      label="Mas Información" icon="pi pi-check"></p-button>
          </p>
        </ng-template>
      </p-card>
    </div>
  </div>
</div>
